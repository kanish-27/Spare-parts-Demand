<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Digital Twin Factory Floor - SmartPlant Simulator</title>
    <link rel="stylesheet" href="../css/main.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<script type="module" src="https://static.rocket.new/rocket-web.js?_cfg=https%3A%2F%2Fsmartplant3321back.builtwithrocket.new&_be=https%3A%2F%2Fapplication.rocket.new&_v=0.1.8"></script>
</head>
<body class="bg-background text-text-primary">
    <!-- Navigation Header -->
    <nav class="bg-surface border-b border-secondary-200 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Logo -->
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <svg class="h-8 w-8 text-primary" viewBox="0 0 32 32" fill="currentColor">
                            <path d="M16 2L3 7v10c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V7l-13-5z"/>
                            <circle cx="16" cy="12" r="3" fill="white"/>
                            <path d="M16 16l-4 4h8l-4-4z" fill="white"/>
                        </svg>
                    </div>
                    <div class="ml-3">
                        <h1 class="text-xl font-bold text-text-primary">SmartPlant Simulator</h1>
                    </div>
                </div>

                <!-- Navigation Links -->
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <a href="homepage.html" class="text-secondary-600 hover:text-primary-600 px-3 py-2 rounded-md text-sm font-medium transition-smooth">Home</a>
                        <a href="interactive_simulation_hub.html" class="text-secondary-600 hover:text-primary-600 px-3 py-2 rounded-md text-sm font-medium transition-smooth">Simulation Hub</a>
                        <a href="digital_twin_factory_floor.html" class="bg-primary-100 text-primary-700 px-3 py-2 rounded-md text-sm font-medium">Digital Twin</a>
                        <a href="predictive_analytics_center.html" class="text-secondary-600 hover:text-primary-600 px-3 py-2 rounded-md text-sm font-medium transition-smooth">Analytics</a>
                        <a href="multi_plant_command_center.html" class="text-secondary-600 hover:text-primary-600 px-3 py-2 rounded-md text-sm font-medium transition-smooth">Command Center</a>
                        <a href="performance_analytics_suite.html" class="text-secondary-600 hover:text-primary-600 px-3 py-2 rounded-md text-sm font-medium transition-smooth">Performance</a>
                    </div>
                </div>

                <!-- Search Bar -->
                <div class="hidden md:flex items-center">
                    <div class="relative">
                        <input type="text" placeholder="Search machines, actions..." class="input-field w-64 pl-10 pr-4 py-2 text-sm" />
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <svg class="h-5 w-5 text-secondary-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                            </svg>
                        </div>
                    </div>
                </div>

                <!-- Mobile menu button -->
                <div class="md:hidden">
                    <button class="text-secondary-600 hover:text-primary-600 p-2">
                        <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Visual Breadcrumbs -->
    <section class="bg-surface border-b border-secondary-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-2 text-sm">
                    <svg class="w-4 h-4 text-primary-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/>
                    </svg>
                    <span class="text-text-secondary">Plant A</span>
                    <svg class="w-4 h-4 text-secondary-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                    </svg>
                    <span class="text-text-secondary">Production Floor</span>
                    <svg class="w-4 h-4 text-secondary-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                    </svg>
                    <span class="text-primary-600 font-medium">Assembly Line 1</span>
                </div>
                
                <!-- Live Status Indicator -->
                <div class="flex items-center space-x-2">
                    <div class="w-2 h-2 bg-success-500 rounded-full animate-pulse"></div>
                    <span class="text-sm text-success-600 font-medium">Live Data Active</span>
                    <span class="text-xs text-text-secondary">Updated 2s ago</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Main Factory Floor Interface -->
    <div class="flex flex-col h-[calc(100vh-8rem)] bg-background overflow-hidden">
        <div class="flex flex-row h-full justify-center">
            <!-- Left Sidebar - Controls & Information -->
            <div class="w-64 bg-surface border-r border-secondary-200 flex flex-col overflow-y-auto">
            <!-- View Controls -->
            <div class="p-6 border-b border-secondary-200">
                <h2 class="text-lg font-semibold text-text-primary mb-4">View Controls</h2>
                
                <!-- Floor Selector -->
                <div class="mb-6">
                    <label class="text-sm text-text-secondary mb-3 block font-medium">Select Floor</label>
                    <div class="flex flex-col">
                        <div class="border-b border-gray-200">
                            <nav class="-mb-px flex" aria-label="Floor selection">
                                <button onclick="switchFloor('assembly')" class="floor-tab active-floor border-primary-500 text-primary-600 whitespace-nowrap py-3 border-b-2 font-medium text-sm flex-1 text-center mr-2">
                                    Assembly
                                </button>
                                <button onclick="switchFloor('production')" class="floor-tab border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap py-3 border-b-2 font-medium text-sm flex-1 text-center mx-2">
                                    Production
                                </button>
                                <button onclick="switchFloor('packaging')" class="floor-tab border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap py-3 border-b-2 font-medium text-sm flex-1 text-center ml-2">
                                    Pack
                                </button>
                            </nav>
                        </div>
                    </div>
                </div>
                
                <!-- Layer Toggle Buttons -->
                <div class="space-y-3">
                    <div class="flex items-center justify-between">
                        <label class="text-sm text-text-secondary">Machine Status</label>
                        <button class="w-12 h-6 bg-primary-600 rounded-full relative transition-smooth">
                            <div class="w-5 h-5 bg-white rounded-full absolute right-0.5 top-0.5"></div>
                        </button>
                    </div>
                    <div class="flex items-center justify-between">
                        <label class="text-sm text-text-secondary">Predictive Alerts</label>
                        <button class="w-12 h-6 bg-primary-600 rounded-full relative transition-smooth">
                            <div class="w-5 h-5 bg-white rounded-full absolute right-0.5 top-0.5"></div>
                        </button>
                    </div>
                    <div class="flex items-center justify-between">
                        <label class="text-sm text-text-secondary">Inventory Levels</label>
                        <button class="w-12 h-6 bg-secondary-300 rounded-full relative transition-smooth">
                            <div class="w-5 h-5 bg-white rounded-full absolute left-0.5 top-0.5"></div>
                        </button>
                    </div>
                    <div class="flex items-center justify-between">
                        <label class="text-sm text-text-secondary">Maintenance Schedule</label>
                        <button class="w-12 h-6 bg-secondary-300 rounded-full relative transition-smooth">
                            <div class="w-5 h-5 bg-white rounded-full absolute left-0.5 top-0.5"></div>
                        </button>
                    </div>
                </div>

                <!-- Zoom Controls -->
                <div class="mt-6">
                    <label class="text-sm text-text-secondary mb-2 block">Zoom Level</label>
                    <div class="flex items-center space-x-2">
                        <button class="w-8 h-8 bg-secondary-100 rounded-lg flex items-center justify-center hover:bg-secondary-200 transition-smooth">
                            <svg class="w-4 h-4 text-secondary-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"/>
                            </svg>
                        </button>
                        <div class="flex-1 bg-secondary-200 rounded-full h-2">
                            <div class="bg-primary-600 h-2 rounded-full" style="width: 65%"></div>
                        </div>
                        <button class="w-8 h-8 bg-secondary-100 rounded-lg flex items-center justify-center hover:bg-secondary-200 transition-smooth">
                            <svg class="w-4 h-4 text-secondary-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Machine Status Overview -->
            <div class="p-6 border-b border-secondary-200">
                <h3 class="text-lg font-semibold text-text-primary mb-4">Machine Overview</h3>
                
                <div class="space-y-3">
                    <div class="flex items-center justify-between p-3 bg-success-50 rounded-lg border border-success-100">
                        <div class="flex items-center space-x-3">
                            <div class="w-3 h-3 bg-success-500 rounded-full"></div>
                            <span class="text-sm font-medium text-success-700">Operational</span>
                        </div>
                        <span class="text-sm font-bold text-success-600">12</span>
                    </div>
                    
                    <div class="flex items-center justify-between p-3 bg-warning-50 rounded-lg border border-warning-100">
                        <div class="flex items-center space-x-3">
                            <div class="w-3 h-3 bg-warning-500 rounded-full"></div>
                            <span class="text-sm font-medium text-warning-700">Maintenance</span>
                        </div>
                        <span class="text-sm font-bold text-warning-600">3</span>
                    </div>
                    
                    <div class="flex items-center justify-between p-3 bg-error-50 rounded-lg border border-error-100">
                        <div class="flex items-center space-x-3">
                            <div class="w-3 h-3 bg-error-500 rounded-full"></div>
                            <span class="text-sm font-medium text-error-700">Critical</span>
                        </div>
                        <span class="text-sm font-bold text-error-600">1</span>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="mt-6 space-y-2">
                    <button class="w-full btn-primary text-sm py-2">
                        Schedule Maintenance
                    </button>
                    <button class="w-full btn-secondary text-sm py-2">
                        Generate Report
                    </button>
                </div>
            </div>

            <!-- Recent Alerts -->
            <div class="flex-1 p-6 overflow-y-auto">
                <h3 class="text-lg font-semibold text-text-primary mb-4">Recent Alerts</h3>
                
                <div class="space-y-3">
                    <div class="p-3 bg-error-50 rounded-lg border border-error-100">
                        <div class="flex items-start space-x-2">
                            <svg class="w-4 h-4 text-error-500 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"/>
                            </svg>
                            <div>
                                <div class="text-sm font-medium text-error-700">Machine M-07 Critical</div>
                                <div class="text-xs text-error-600">Bearing temperature exceeded threshold</div>
                                <div class="text-xs text-text-secondary mt-1">2 minutes ago</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="p-3 bg-warning-50 rounded-lg border border-warning-100">
                        <div class="flex items-start space-x-2">
                            <svg class="w-4 h-4 text-warning-500 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            <div>
                                <div class="text-sm font-medium text-warning-700">Predictive Alert</div>
                                <div class="text-xs text-warning-600">M-03 requires maintenance in 48h</div>
                                <div class="text-xs text-text-secondary mt-1">15 minutes ago</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="p-3 bg-primary-50 rounded-lg border border-primary-100">
                        <div class="flex items-start space-x-2">
                            <svg class="w-4 h-4 text-primary-500 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            <div>
                                <div class="text-sm font-medium text-primary-700">Maintenance Complete</div>
                                <div class="text-xs text-primary-600">M-12 back online, efficiency restored</div>
                                <div class="text-xs text-text-secondary mt-1">1 hour ago</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Factory Floor Visualization -->
        <div class="flex-1 relative bg-secondary-50 overflow-auto">
            <!-- Factory Floor Canvas -->
            <div class="absolute inset-0 overflow-hidden">
                <svg class="w-full h-full" viewBox="0 0 1200 800" style="background: linear-gradient(45deg, #f8fafc 25%, transparent 25%), linear-gradient(-45deg, #f8fafc 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #f8fafc 75%), linear-gradient(-45deg, transparent 75%, #f8fafc 75%); background-size: 20px 20px; background-position: 0 0, 0 10px, 10px -10px, -10px 0px;">
                    
                    <!-- Factory Floor Grid -->
                    <defs>
                        <pattern id="factoryGrid" width="40" height="40" patternUnits="userSpaceOnUse">
                            <path d="M 40 0 L 0 0 0 40" fill="none" stroke="#E2E8F0" stroke-width="1" opacity="0.5"/>
                        </pattern>
                        
                        <!-- Machine Status Gradients -->
                        <linearGradient id="operationalGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#10B981;stop-opacity:1"/>
                            <stop offset="100%" style="stop-color:#059669;stop-opacity:1"/>
                        </linearGradient>
                        
                        <linearGradient id="warningGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#F59E0B;stop-opacity:1"/>
                            <stop offset="100%" style="stop-color:#D97706;stop-opacity:1"/>
                        </linearGradient>
                        
                        <linearGradient id="criticalGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#EF4444;stop-opacity:1"/>
                            <stop offset="100%" style="stop-color:#DC2626;stop-opacity:1"/>
                        </linearGradient>
                    </defs>
                    
                    <rect width="100%" height="100%" fill="url(#factoryGrid)"/>
                    
                    <!-- Assembly Floor Section -->
                    <g id="assembly-floor" class="floor-section">
                    <!-- Assembly Line 1 -->
                    <g id="assemblyLine1">
                        <!-- Conveyor Belt -->
                        <rect x="100" y="200" width="800" height="60" rx="30" fill="#CBD5E1" stroke="#94A3B8" stroke-width="2"/>
                        <rect x="110" y="210" width="780" height="40" rx="20" fill="#E2E8F0"/>
                        
                        <!-- Moving Belt Animation -->
                        <rect x="110" y="225" width="20" height="10" rx="5" fill="#64748B">
                            <animateTransform attributeName="transform" type="translate" values="0,0; 760,0; 0,0" dur="8s" repeatCount="indefinite"/>
                        </rect>
                        
                        <!-- Machine M-01 (Operational) -->
                        <g id="machine-m01" class="cursor-pointer" onclick="showMachineDetails('M-01')">
                            <rect x="150" y="120" width="100" height="80" rx="8" fill="url(#operationalGradient)" stroke="#059669" stroke-width="3"/>
                            <text x="200" y="145" text-anchor="middle" class="text-sm font-bold fill-white">M-01</text>
                            <text x="200" y="165" text-anchor="middle" class="text-xs fill-white">Stamping</text>
                            <text x="200" y="180" text-anchor="middle" class="text-xs fill-white">98.5%</text>
                            
                            <!-- Status Indicator -->
                            <circle cx="235" cy="135" r="6" fill="#ECFDF5" stroke="#10B981" stroke-width="2">
                                <animate attributeName="opacity" values="1;0.3;1" dur="2s" repeatCount="indefinite"/>
                            </circle>
                        </g>
                        
                        <!-- Machine M-02 (Operational) -->
                        <g id="machine-m02" class="cursor-pointer" onclick="showMachineDetails('M-02')">
                            <rect x="300" y="120" width="100" height="80" rx="8" fill="url(#operationalGradient)" stroke="#059669" stroke-width="3"/>
                            <text x="350" y="145" text-anchor="middle" class="text-sm font-bold fill-white">M-02</text>
                            <text x="350" y="165" text-anchor="middle" class="text-xs fill-white">Welding</text>
                            <text x="350" y="180" text-anchor="middle" class="text-xs fill-white">96.2%</text>
                            
                            <circle cx="385" cy="135" r="6" fill="#ECFDF5" stroke="#10B981" stroke-width="2">
                                <animate attributeName="opacity" values="1;0.3;1" dur="1.8s" repeatCount="indefinite"/>
                            </circle>
                        </g>
                        
                        <!-- Machine M-03 (Warning - Predictive Alert) -->
                        <g id="machine-m03" class="cursor-pointer" onclick="showMachineDetails('M-03')">
                            <rect x="450" y="120" width="100" height="80" rx="8" fill="url(#warningGradient)" stroke="#D97706" stroke-width="3"/>
                            <text x="500" y="145" text-anchor="middle" class="text-sm font-bold fill-white">M-03</text>
                            <text x="500" y="165" text-anchor="middle" class="text-xs fill-white">Assembly</text>
                            <text x="500" y="180" text-anchor="middle" class="text-xs fill-white">89.1%</text>
                            
                            <circle cx="535" cy="135" r="6" fill="#FFFBEB" stroke="#F59E0B" stroke-width="2">
                                <animate attributeName="opacity" values="1;0.3;1" dur="1s" repeatCount="indefinite"/>
                            </circle>
                            
                            <!-- Predictive Alert Icon -->
                            <g transform="translate(520, 105)">
                                <circle r="8" fill="#F59E0B"/>
                                <text x="0" y="3" text-anchor="middle" class="text-xs font-bold fill-white">!</text>
                            </g>
                        </g>
                        
                        <!-- Machine M-04 (Operational) -->
                        <g id="machine-m04" class="cursor-pointer" onclick="showMachineDetails('M-04')">
                            <rect x="600" y="120" width="100" height="80" rx="8" fill="url(#operationalGradient)" stroke="#059669" stroke-width="3"/>
                            <text x="650" y="145" text-anchor="middle" class="text-sm font-bold fill-white">M-04</text>
                            <text x="650" y="165" text-anchor="middle" class="text-xs fill-white">Testing</text>
                            <text x="650" y="180" text-anchor="middle" class="text-xs fill-white">97.8%</text>
                            
                            <circle cx="685" cy="135" r="6" fill="#ECFDF5" stroke="#10B981" stroke-width="2">
                                <animate attributeName="opacity" values="1;0.3;1" dur="2.2s" repeatCount="indefinite"/>
                            </circle>
                        </g>
                        
                        <!-- Machine M-05 (Operational) -->
                        <g id="machine-m05" class="cursor-pointer" onclick="showMachineDetails('M-05')">
                            <rect x="750" y="120" width="100" height="80" rx="8" fill="url(#operationalGradient)" stroke="#059669" stroke-width="3"/>
                            <text x="800" y="145" text-anchor="middle" class="text-sm font-bold fill-white">M-05</text>
                            <text x="800" y="165" text-anchor="middle" class="text-xs fill-white">Packaging</text>
                            <text x="800" y="180" text-anchor="middle" class="text-xs fill-white">99.1%</text>
                            
                            <circle cx="835" cy="135" r="6" fill="#ECFDF5" stroke="#10B981" stroke-width="2">
                                <animate attributeName="opacity" values="1;0.3;1" dur="1.9s" repeatCount="indefinite"/>
                            </circle>
                        </g>
                    </g>
                    
                    <!-- Assembly Line 2 -->
                    <g id="assemblyLine2">
                        <!-- Conveyor Belt -->
                        <rect x="100" y="400" width="800" height="60" rx="30" fill="#CBD5E1" stroke="#94A3B8" stroke-width="2"/>
                        <rect x="110" y="410" width="780" height="40" rx="20" fill="#E2E8F0"/>
                        
                        <!-- Moving Belt Animation -->
                        <rect x="110" y="425" width="20" height="10" rx="5" fill="#64748B">
                            <animateTransform attributeName="transform" type="translate" values="760,0; 0,0; 760,0" dur="10s" repeatCount="indefinite"/>
                        </rect>
                        
                        <!-- Machine M-06 (Operational) -->
                        <g id="machine-m06" class="cursor-pointer" onclick="showMachineDetails('M-06')">
                            <rect x="150" y="320" width="100" height="80" rx="8" fill="url(#operationalGradient)" stroke="#059669" stroke-width="3"/>
                            <text x="200" y="345" text-anchor="middle" class="text-sm font-bold fill-white">M-06</text>
                            <text x="200" y="365" text-anchor="middle" class="text-xs fill-white">Cutting</text>
                            <text x="200" y="380" text-anchor="middle" class="text-xs fill-white">94.7%</text>
                            
                            <circle cx="235" cy="335" r="6" fill="#ECFDF5" stroke="#10B981" stroke-width="2">
                                <animate attributeName="opacity" values="1;0.3;1" dur="2.1s" repeatCount="indefinite"/>
                            </circle>
                        </g>
                        
                        <!-- Machine M-07 (Critical) -->
                        <g id="machine-m07" class="cursor-pointer" onclick="showMachineDetails('M-07')">
                            <rect x="300" y="320" width="100" height="80" rx="8" fill="url(#criticalGradient)" stroke="#DC2626" stroke-width="3"/>
                            <text x="350" y="345" text-anchor="middle" class="text-sm font-bold fill-white">M-07</text>
                            <text x="350" y="365" text-anchor="middle" class="text-xs fill-white">Drilling</text>
                            <text x="350" y="380" text-anchor="middle" class="text-xs fill-white">OFFLINE</text>
                            
                            <circle cx="385" cy="335" r="6" fill="#FEF2F2" stroke="#EF4444" stroke-width="2">
                                <animate attributeName="opacity" values="1;0.1;1" dur="0.5s" repeatCount="indefinite"/>
                            </circle>
                            
                            <!-- Critical Alert Icon -->
                            <g transform="translate(370, 305)">
                                <circle r="10" fill="#EF4444"/>
                                <text x="0" y="3" text-anchor="middle" class="text-sm font-bold fill-white">!</text>
                            </g>
                        </g>
                        
                        <!-- Machine M-08 (Maintenance) -->
                        <g id="machine-m08" class="cursor-pointer" onclick="showMachineDetails('M-08')">
                            <rect x="450" y="320" width="100" height="80" rx="8" fill="url(#warningGradient)" stroke="#D97706" stroke-width="3"/>
                            <text x="500" y="345" text-anchor="middle" class="text-sm font-bold fill-white">M-08</text>
                            <text x="500" y="365" text-anchor="middle" class="text-xs fill-white">Polishing</text>
                            <text x="500" y="380" text-anchor="middle" class="text-xs fill-white">MAINT</text>
                            
                            <circle cx="535" cy="335" r="6" fill="#FFFBEB" stroke="#F59E0B" stroke-width="2"/>
                            
                            <!-- Maintenance Icon -->
                            <g transform="translate(520, 305)">
                                <circle r="8" fill="#F59E0B"/>
                                <path d="M-3,-3 L3,3 M3,-3 L-3,3" stroke="white" stroke-width="2"/>
                            </g>
                        </g>
                    </g>
                    
                    <!-- Quality Control Station -->
                    <g id="qualityControl">
                        <rect x="950" y="250" width="120" height="100" rx="8" fill="url(#operationalGradient)" stroke="#059669" stroke-width="3"/>
                        <text x="1010" y="280" text-anchor="middle" class="text-sm font-bold fill-white">QC-01</text>
                        <text x="1010" y="300" text-anchor="middle" class="text-xs fill-white">Quality Control</text>
                        <text x="1010" y="320" text-anchor="middle" class="text-xs fill-white">Pass Rate: 99.2%</text>
                        
                        <circle cx="1055" cy="265" r="6" fill="#ECFDF5" stroke="#10B981" stroke-width="2">
                            <animate attributeName="opacity" values="1;0.3;1" dur="2.5s" repeatCount="indefinite"/>
                        </circle>
                    </g>
                    
                    <!-- Inventory Areas -->
                    <g id="inventory">
                        <!-- Raw Materials -->
                        <rect x="50" y="100" width="80" height="60" rx="4" fill="#F1F5F9" stroke="#94A3B8" stroke-width="2"/>
                        <text x="90" y="125" text-anchor="middle" class="text-xs font-medium fill-slate-600">Raw Materials</text>
                        <text x="90" y="140" text-anchor="middle" class="text-xs fill-slate-500">Stock: 847</text>
                        
                        <!-- Finished Goods -->
                        <rect x="950" y="400" width="80" height="60" rx="4" fill="#F1F5F9" stroke="#94A3B8" stroke-width="2"/>
                        <text x="990" y="425" text-anchor="middle" class="text-xs font-medium fill-slate-600">Finished Goods</text>
                        <text x="990" y="440" text-anchor="middle" class="text-xs fill-slate-500">Stock: 234</text>
                    </g>
                    
                    <!-- Data Flow Indicators -->
                    <g id="dataFlow">
                        <!-- Data streams between machines -->
                        <path d="M250,160 Q275,140 300,160" stroke="#2563EB" stroke-width="2" fill="none" opacity="0.6">
                            <animate attributeName="stroke-dasharray" values="0,10; 10,0; 0,10" dur="2s" repeatCount="indefinite"/>
                        </path>
                        <path d="M400,160 Q425,140 450,160" stroke="#2563EB" stroke-width="2" fill="none" opacity="0.6">
                            <animate attributeName="stroke-dasharray" values="0,10; 10,0; 0,10" dur="2s" repeatCount="indefinite"/>
                        </path>
                        <path d="M550,160 Q575,140 600,160" stroke="#2563EB" stroke-width="2" fill="none" opacity="0.6">
                            <animate attributeName="stroke-dasharray" values="0,10; 10,0; 0,10" dur="2s" repeatCount="indefinite"/>
                        </path>
                    </g>
                    </g>
                    
                    <!-- Production Floor Section -->
                    <g id="production-floor" class="floor-section" style="display: none;">
                        <!-- Production Line 1 -->
                        <g id="productionLine1">
                            <!-- Conveyor Belt -->
                            <rect x="100" y="150" width="900" height="60" rx="30" fill="#CBD5E1" stroke="#94A3B8" stroke-width="2"/>
                            <rect x="110" y="160" width="880" height="40" rx="20" fill="#E2E8F0"/>
                            
                            <!-- Moving Belt Animation -->
                            <rect x="110" y="175" width="20" height="10" rx="5" fill="#64748B">
                                <animateTransform attributeName="transform" type="translate" values="0,0; 860,0; 0,0" dur="10s" repeatCount="indefinite"/>
                            </rect>
                            
                            <!-- Machine P-01 (Operational) -->
                            <g id="machine-p01" class="cursor-pointer" onclick="showMachineDetails('P-01')">
                                <rect x="150" y="70" width="100" height="80" rx="8" fill="url(#operationalGradient)" stroke="#059669" stroke-width="3"/>
                                <text x="200" y="95" text-anchor="middle" class="text-sm font-bold fill-white">P-01</text>
                                <text x="200" y="115" text-anchor="middle" class="text-xs fill-white">Mixing</text>
                                <text x="200" y="130" text-anchor="middle" class="text-xs fill-white">97.3%</text>
                                
                                <!-- Status Indicator -->
                                <circle cx="235" cy="85" r="6" fill="#ECFDF5" stroke="#10B981" stroke-width="2">
                                    <animate attributeName="opacity" values="1;0.3;1" dur="2s" repeatCount="indefinite"/>
                                </circle>
                            </g>
                            
                            <!-- Machine P-02 (Warning) -->
                            <g id="machine-p02" class="cursor-pointer" onclick="showMachineDetails('P-02')">
                                <rect x="400" y="70" width="100" height="80" rx="8" fill="url(#warningGradient)" stroke="#D97706" stroke-width="3"/>
                                <text x="450" y="95" text-anchor="middle" class="text-sm font-bold fill-white">P-02</text>
                                <text x="450" y="115" text-anchor="middle" class="text-xs fill-white">Heating</text>
                                <text x="450" y="130" text-anchor="middle" class="text-xs fill-white">86.5%</text>
                                
                                <circle cx="485" cy="85" r="6" fill="#FFFBEB" stroke="#F59E0B" stroke-width="2">
                                    <animate attributeName="opacity" values="1;0.3;1" dur="1s" repeatCount="indefinite"/>
                                </circle>
                                
                                <!-- Predictive Alert Icon -->
                                <g transform="translate(470, 55)">
                                    <circle r="8" fill="#F59E0B"/>
                                    <text x="0" y="3" text-anchor="middle" class="text-xs font-bold fill-white">!</text>
                                </g>
                            </g>
                            
                            <!-- Machine P-03 (Operational) -->
                            <g id="machine-p03" class="cursor-pointer" onclick="showMachineDetails('P-03')">
                                <rect x="650" y="70" width="100" height="80" rx="8" fill="url(#operationalGradient)" stroke="#059669" stroke-width="3"/>
                                <text x="700" y="95" text-anchor="middle" class="text-sm font-bold fill-white">P-03</text>
                                <text x="700" y="115" text-anchor="middle" class="text-xs fill-white">Cooling</text>
                                <text x="700" y="130" text-anchor="middle" class="text-xs fill-white">99.1%</text>
                                
                                <circle cx="735" cy="85" r="6" fill="#ECFDF5" stroke="#10B981" stroke-width="2">
                                    <animate attributeName="opacity" values="1;0.3;1" dur="2.2s" repeatCount="indefinite"/>
                                </circle>
                            </g>
                            
                            <!-- Machine P-04 (Critical) -->
                            <g id="machine-p04" class="cursor-pointer" onclick="showMachineDetails('P-04')">
                                <rect x="900" y="70" width="100" height="80" rx="8" fill="url(#criticalGradient)" stroke="#DC2626" stroke-width="3"/>
                                <text x="950" y="95" text-anchor="middle" class="text-sm font-bold fill-white">P-04</text>
                                <text x="950" y="115" text-anchor="middle" class="text-xs fill-white">Molding</text>
                                <text x="950" y="130" text-anchor="middle" class="text-xs fill-white">OFFLINE</text>
                                
                                <circle cx="985" cy="85" r="6" fill="#FEF2F2" stroke="#EF4444" stroke-width="2">
                                    <animate attributeName="opacity" values="1;0.1;1" dur="0.5s" repeatCount="indefinite"/>
                                </circle>
                                
                                <!-- Critical Alert Icon -->
                                <g transform="translate(970, 55)">
                                    <circle r="10" fill="#EF4444"/>
                                    <text x="0" y="3" text-anchor="middle" class="text-sm font-bold fill-white">!</text>
                                </g>
                            </g>
                        </g>
                        
                        <!-- Production Line 2 -->
                        <g id="productionLine2">
                            <!-- Storage Tanks -->
                            <g id="storageTanks">
                                <circle cx="200" cy="350" r="60" fill="#F1F5F9" stroke="#94A3B8" stroke-width="2"/>
                                <text x="200" y="340" text-anchor="middle" class="text-sm font-medium fill-slate-600">Tank 1</text>
                                <text x="200" y="360" text-anchor="middle" class="text-xs fill-slate-500">85% Full</text>
                                
                                <circle cx="400" cy="350" r="60" fill="#F1F5F9" stroke="#94A3B8" stroke-width="2"/>
                                <text x="400" y="340" text-anchor="middle" class="text-sm font-medium fill-slate-600">Tank 2</text>
                                <text x="400" y="360" text-anchor="middle" class="text-xs fill-slate-500">62% Full</text>
                                
                                <circle cx="600" cy="350" r="60" fill="#F1F5F9" stroke="#94A3B8" stroke-width="2"/>
                                <text x="600" y="340" text-anchor="middle" class="text-sm font-medium fill-slate-600">Tank 3</text>
                                <text x="600" y="360" text-anchor="middle" class="text-xs fill-slate-500">93% Full</text>
                            </g>
                            
                            <!-- Connecting Pipes -->
                            <path d="M 200 410 L 200 450 L 600 450 L 600 410" stroke="#94A3B8" stroke-width="4" fill="none"/>
                            <path d="M 400 410 L 400 450" stroke="#94A3B8" stroke-width="4" fill="none"/>
                            
                            <!-- Flow Indicators -->
                            <circle cx="300" cy="450" r="5" fill="#3B82F6">
                                <animateTransform attributeName="transform" type="translate" values="0,0; 50,0; 0,0" dur="2s" repeatCount="indefinite"/>
                            </circle>
                            <circle cx="500" cy="450" r="5" fill="#3B82F6">
                                <animateTransform attributeName="transform" type="translate" values="0,0; 50,0; 0,0" dur="2s" repeatCount="indefinite"/>
                            </circle>
                        </g>
                        
                        <!-- Quality Testing Station -->
                        <g id="qualityTesting">
                            <rect x="800" y="320" width="120" height="100" rx="8" fill="url(#operationalGradient)" stroke="#059669" stroke-width="3"/>
                            <text x="860" y="350" text-anchor="middle" class="text-sm font-bold fill-white">QT-01</text>
                            <text x="860" y="370" text-anchor="middle" class="text-xs fill-white">Quality Testing</text>
                            <text x="860" y="390" text-anchor="middle" class="text-xs fill-white">Pass Rate: 98.7%</text>
                            
                            <circle cx="905" cy="335" r="6" fill="#ECFDF5" stroke="#10B981" stroke-width="2">
                                <animate attributeName="opacity" values="1;0.3;1" dur="2.5s" repeatCount="indefinite"/>
                            </circle>
                        </g>
                        
                        <!-- Raw Materials Storage -->
                        <rect x="50" y="200" width="80" height="60" rx="4" fill="#F1F5F9" stroke="#94A3B8" stroke-width="2"/>
                        <text x="90" y="225" text-anchor="middle" class="text-xs font-medium fill-slate-600">Raw Materials</text>
                        <text x="90" y="240" text-anchor="middle" class="text-xs fill-slate-500">Stock: 523</text>
                        
                        <!-- Processed Materials -->
                        <rect x="950" y="200" width="80" height="60" rx="4" fill="#F1F5F9" stroke="#94A3B8" stroke-width="2"/>
                        <text x="990" y="225" text-anchor="middle" class="text-xs font-medium fill-slate-600">Processed</text>
                        <text x="990" y="240" text-anchor="middle" class="text-xs fill-slate-500">Stock: 312</text>
                    </g>
                    
                    <!-- Packaging Floor Section -->
                    <g id="packaging-floor" class="floor-section" style="display: none;">
                        <!-- Packaging Line -->
                        <g id="packagingLine">
                            <!-- Conveyor Belt -->
                            <rect x="100" y="250" width="900" height="60" rx="30" fill="#CBD5E1" stroke="#94A3B8" stroke-width="2"/>
                            <rect x="110" y="260" width="880" height="40" rx="20" fill="#E2E8F0"/>
                            
                            <!-- Moving Belt Animation -->
                            <rect x="110" y="275" width="20" height="10" rx="5" fill="#64748B">
                                <animateTransform attributeName="transform" type="translate" values="0,0; 860,0; 0,0" dur="9s" repeatCount="indefinite"/>
                            </rect>
                            
                            <!-- Machine K-01 (Operational) -->
                            <g id="machine-k01" class="cursor-pointer" onclick="showMachineDetails('K-01')">
                                <rect x="150" y="150" width="100" height="80" rx="8" fill="url(#operationalGradient)" stroke="#059669" stroke-width="3"/>
                                <text x="200" y="175" text-anchor="middle" class="text-sm font-bold fill-white">K-01</text>
                                <text x="200" y="195" text-anchor="middle" class="text-xs fill-white">Boxing</text>
                                <text x="200" y="210" text-anchor="middle" class="text-xs fill-white">95.8%</text>
                                
                                <!-- Status Indicator -->
                                <circle cx="235" cy="165" r="6" fill="#ECFDF5" stroke="#10B981" stroke-width="2">
                                    <animate attributeName="opacity" values="1;0.3;1" dur="2s" repeatCount="indefinite"/>
                                </circle>
                            </g>
                            
                            <!-- Machine K-02 (Operational) -->
                            <g id="machine-k02" class="cursor-pointer" onclick="showMachineDetails('K-02')">
                                <rect x="350" y="150" width="100" height="80" rx="8" fill="url(#operationalGradient)" stroke="#059669" stroke-width="3"/>
                                <text x="400" y="175" text-anchor="middle" class="text-sm font-bold fill-white">K-02</text>
                                <text x="400" y="195" text-anchor="middle" class="text-xs fill-white">Labeling</text>
                                <text x="400" y="210" text-anchor="middle" class="text-xs fill-white">97.2%</text>
                                
                                <circle cx="435" cy="165" r="6" fill="#ECFDF5" stroke="#10B981" stroke-width="2">
                                    <animate attributeName="opacity" values="1;0.3;1" dur="1.8s" repeatCount="indefinite"/>
                                </circle>
                            </g>
                            
                            <!-- Machine K-03 (Warning) -->
                            <g id="machine-k03" class="cursor-pointer" onclick="showMachineDetails('K-03')">
                                <rect x="550" y="150" width="100" height="80" rx="8" fill="url(#warningGradient)" stroke="#D97706" stroke-width="3"/>
                                <text x="600" y="175" text-anchor="middle" class="text-sm font-bold fill-white">K-03</text>
                                <text x="600" y="195" text-anchor="middle" class="text-xs fill-white">Sealing</text>
                                <text x="600" y="210" text-anchor="middle" class="text-xs fill-white">88.3%</text>
                                
                                <circle cx="635" cy="165" r="6" fill="#FFFBEB" stroke="#F59E0B" stroke-width="2">
                                    <animate attributeName="opacity" values="1;0.3;1" dur="1s" repeatCount="indefinite"/>
                                </circle>
                                
                                <!-- Predictive Alert Icon -->
                                <g transform="translate(620, 135)">
                                    <circle r="8" fill="#F59E0B"/>
                                    <text x="0" y="3" text-anchor="middle" class="text-xs font-bold fill-white">!</text>
                                </g>
                            </g>
                            
                            <!-- Machine K-04 (Operational) -->
                            <g id="machine-k04" class="cursor-pointer" onclick="showMachineDetails('K-04')">
                                <rect x="750" y="150" width="100" height="80" rx="8" fill="url(#operationalGradient)" stroke="#059669" stroke-width="3"/>
                                <text x="800" y="175" text-anchor="middle" class="text-sm font-bold fill-white">K-04</text>
                                <text x="800" y="195" text-anchor="middle" class="text-xs fill-white">Palletizing</text>
                                <text x="800" y="210" text-anchor="middle" class="text-xs fill-white">96.5%</text>
                                
                                <circle cx="835" cy="165" r="6" fill="#ECFDF5" stroke="#10B981" stroke-width="2">
                                    <animate attributeName="opacity" values="1;0.3;1" dur="2.2s" repeatCount="indefinite"/>
                                </circle>
                            </g>
                        </g>
                        
                        <!-- Shipping Area -->
                        <g id="shippingArea">
                            <rect x="200" y="400" width="700" height="150" rx="8" fill="#F1F5F9" stroke="#94A3B8" stroke-width="2"/>
                            <text x="550" y="425" text-anchor="middle" class="text-lg font-medium fill-slate-600">Shipping Area</text>
                            
                            <!-- Shipping Pallets - Ready with animation -->
                            <g class="pallet-ready">
                                <rect x="250" y="480" width="60" height="40" fill="#BFDBFE" stroke="#3B82F6" stroke-width="1.5">
                                    <animate attributeName="opacity" values="1;0.7;1" dur="3s" repeatCount="indefinite" />
                                </rect>
                                <text x="280" y="500" text-anchor="middle" class="text-xs font-medium fill-slate-700">Ready</text>
                            </g>
                            
                            <!-- Shipping Pallets - In Transit with animation -->
                            <g class="pallet-transit">
                                <rect x="350" y="480" width="60" height="40" fill="#FEF3C7" stroke="#F59E0B" stroke-width="1.5">
                                    <animate attributeName="x" values="350;360;350" dur="2s" repeatCount="indefinite" />
                                </rect>
                                <text x="380" y="500" text-anchor="middle" class="text-xs font-medium fill-slate-700">
                                    <animate attributeName="x" values="380;390;380" dur="2s" repeatCount="indefinite" />
                                    Transit
                                </text>
                            </g>
                            
                            <!-- Shipping Pallets - Delivered with animation -->
                            <g class="pallet-delivered">
                                <rect x="450" y="480" width="60" height="40" fill="#D1FAE5" stroke="#10B981" stroke-width="1.5">
                                    <animate attributeName="stroke-width" values="1.5;2.5;1.5" dur="2.5s" repeatCount="indefinite" />
                                </rect>
                                <text x="480" y="500" text-anchor="middle" class="text-xs font-medium fill-slate-700">Delivered</text>
                            </g>
                            
                            <!-- Shipping Dock with animation -->
                            <g class="loading-dock">
                                <rect x="550" y="460" width="200" height="60" fill="#E2E8F0" stroke="#64748B" stroke-width="2" rx="4">
                                    <animate attributeName="fill" values="#E2E8F0;#CBD5E1;#E2E8F0" dur="4s" repeatCount="indefinite" />
                                </rect>
                                <text x="650" y="490" text-anchor="middle" class="text-sm font-medium fill-slate-700">Loading Dock</text>
                            </g>
                            
                            <!-- Moving Forklift -->
                            <g class="forklift">
                                <rect x="600" y="440" width="20" height="15" fill="#475569">
                                    <animate attributeName="x" values="600;700;600" dur="6s" repeatCount="indefinite" />
                                </rect>
                                <rect x="605" y="435" width="10" height="5" fill="#334155">
                                    <animate attributeName="x" values="605;705;605" dur="6s" repeatCount="indefinite" />
                                </rect>
                                <circle cx="605" cy="455" r="3" fill="#1E293B">
                                    <animate attributeName="cx" values="605;705;605" dur="6s" repeatCount="indefinite" />
                                </circle>
                                <circle cx="615" cy="455" r="3" fill="#1E293B">
                                    <animate attributeName="cx" values="615;715;615" dur="6s" repeatCount="indefinite" />
                                </circle>
                            </g>
                        </g>
                        </g>
                        
                        <!-- Inventory Status -->
                        <g id="inventoryStatus">
                            <rect x="950" y="350" width="150" height="120" rx="8" fill="#F8FAFC" stroke="#94A3B8" stroke-width="2"/>
                            <text x="1025" y="375" text-anchor="middle" class="text-sm font-medium fill-slate-600">Shipping Status</text>
                            <text x="1025" y="400" text-anchor="middle" class="text-xs fill-slate-500">Ready: 42 pallets</text>
                            <text x="1025" y="420" text-anchor="middle" class="text-xs fill-slate-500">In Transit: 18 pallets</text>
                            <text x="1025" y="440" text-anchor="middle" class="text-xs fill-slate-500">Delivered: 156 pallets</text>
                        </g>
                    </g>
                </svg>
            </div>


            <!-- Performance Metrics Overlay -->
            <div class="absolute bottom-4 left-4 bg-surface rounded-lg shadow-industrial border border-secondary-200 p-4">
                <h4 class="text-sm font-semibold text-text-primary mb-3">Live Performance</h4>
                <div class="grid grid-cols-3 gap-4 text-center">
                    <div>
                        <div class="text-lg font-bold text-success-600">94.2%</div>
                        <div class="text-xs text-text-secondary">Overall Efficiency</div>
                    </div>
                    <div>
                        <div class="text-lg font-bold text-primary-600">847</div>
                        <div class="text-xs text-text-secondary">Units/Hour</div>
                    </div>
                    <div>
                        <div class="text-lg font-bold text-accent-600">2.1h</div>
                        <div class="text-xs text-text-secondary">Avg Cycle Time</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Panel - Machine Details (Hidden by default) -->
        <div id="machineDetailsPanel" class="w-96 bg-surface border-l border-secondary-200 shadow-lg transform translate-x-full transition-transform duration-300 ease-in-out">
            <div class="p-6">
                <div class="flex items-center justify-between mb-6">
                    <h2 id="machineTitle" class="text-xl font-semibold text-text-primary">Machine Details</h2>
                    <button onclick="hideMachineDetails()" class="w-8 h-8 bg-secondary-100 rounded-lg flex items-center justify-center hover:bg-secondary-200 transition-smooth">
                        <svg class="w-4 h-4 text-secondary-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                        </svg>
                    </button>
                </div>

                <!-- Machine Status Card -->
                <div id="machineStatusCard" class="card mb-6">
                    <div class="flex items-center justify-between mb-4">
                        <div>
                            <h3 id="machineId" class="text-lg font-semibold text-text-primary">M-01</h3>
                            <p id="machineType" class="text-sm text-text-secondary">Stamping Machine</p>
                        </div>
                        <div id="machineStatusBadge" class="px-3 py-1 rounded-full text-xs font-medium bg-success-100 text-success-700">
                            Operational
                        </div>
                    </div>
                    
                    <div class="space-y-3">
                        <div class="flex justify-between">
                            <span class="text-sm text-text-secondary">Efficiency</span>
                            <span id="machineEfficiency" class="text-sm font-medium text-text-primary">98.5%</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-sm text-text-secondary">Temperature</span>
                            <span id="machineTemp" class="text-sm font-medium text-text-primary">72C</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-sm text-text-secondary">Vibration</span>
                            <span id="machineVibration" class="text-sm font-medium text-text-primary">Normal</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-sm text-text-secondary">Last Maintenance</span>
                            <span id="lastMaintenance" class="text-sm font-medium text-text-primary">2 days ago</span>
                        </div>
                    </div>
                </div>

                <!-- Predictive Timeline -->
                <div class="card mb-6">
                    <h4 class="text-lg font-semibold text-text-primary mb-4">Predictive Timeline</h4>
                    <div class="space-y-4">
                        <div class="flex items-center space-x-3">
                            <div class="w-3 h-3 bg-success-500 rounded-full"></div>
                            <div class="flex-1">
                                <div class="text-sm font-medium text-text-primary">Current Status</div>
                                <div class="text-xs text-text-secondary">Operating normally</div>
                            </div>
                            <div class="text-xs text-text-secondary">Now</div>
                        </div>
                        
                        <div class="flex items-center space-x-3">
                            <div class="w-3 h-3 bg-warning-500 rounded-full"></div>
                            <div class="flex-1">
                                <div class="text-sm font-medium text-text-primary">Maintenance Due</div>
                                <div class="text-xs text-text-secondary">Scheduled preventive maintenance</div>
                            </div>
                            <div class="text-xs text-text-secondary">+48h</div>
                        </div>
                        
                        <div class="flex items-center space-x-3">
                            <div class="w-3 h-3 bg-secondary-300 rounded-full"></div>
                            <div class="flex-1">
                                <div class="text-sm font-medium text-text-primary">Parts Replacement</div>
                                <div class="text-xs text-text-secondary">Bearing replacement recommended</div>
                            </div>
                            <div class="text-xs text-text-secondary">+2 weeks</div>
                        </div>
                    </div>
                </div>

                <!-- Parts Inventory -->
                <div class="card mb-6">
                    <h4 class="text-lg font-semibold text-text-primary mb-4">Parts Inventory</h4>
                    <div class="space-y-3">
                        <div class="flex items-center justify-between p-2 bg-success-50 rounded-lg">
                            <div>
                                <div class="text-sm font-medium text-success-700">Hydraulic Filter</div>
                                <div class="text-xs text-success-600">In Stock</div>
                            </div>
                            <div class="text-sm font-bold text-success-600">12</div>
                        </div>
                        
                        <div class="flex items-center justify-between p-2 bg-warning-50 rounded-lg">
                            <div>
                                <div class="text-sm font-medium text-warning-700">Bearing Assembly</div>
                                <div class="text-xs text-warning-600">Low Stock</div>
                            </div>
                            <div class="text-sm font-bold text-warning-600">3</div>
                        </div>
                        
                        <div class="flex items-center justify-between p-2 bg-error-50 rounded-lg">
                            <div>
                                <div class="text-sm font-medium text-error-700">Control Module</div>
                                <div class="text-xs text-error-600">Out of Stock</div>
                            </div>
                            <div class="text-sm font-bold text-error-600">0</div>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="space-y-3">
                    <button class="w-full btn-primary">
                        Schedule Maintenance
                    </button>
                    <button class="w-full btn-secondary">
                        Order Parts
                    </button>
                    <button class="w-full bg-accent-100 text-accent-700 font-semibold px-6 py-3 rounded-lg hover:bg-accent-200 transition-smooth">
                        Run Simulation
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-secondary-800 text-white py-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <!-- Company Info -->
                <div class="col-span-1 md:col-span-2">
                    <div class="flex items-center mb-4">
                        <svg class="h-8 w-8 text-primary-400" viewBox="0 0 32 32" fill="currentColor">
                            <path d="M16 2L3 7v10c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V7l-13-5z"/>
                            <circle cx="16" cy="12" r="3" fill="white"/>
                            <path d="M16 16l-4 4h8l-4-4z" fill="white"/>
                        </svg>
                        <span class="ml-3 text-xl font-bold">SmartPlant Simulator</span>
                    </div>
                    <p class="text-secondary-300 mb-4">Transforming industrial operations through intelligent simulation and predictive analytics. Empowering manufacturers to achieve operational excellence.</p>
                    <div class="flex space-x-4">
                        <a href="javascript:void(0)" class="text-secondary-400 hover:text-white transition-smooth">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"/></svg>
                        </a>
                        <a href="javascript:void(0)" class="text-secondary-400 hover:text-white transition-smooth">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"/></svg>
                        </a>
                        <a href="javascript:void(0)" class="text-secondary-400 hover:text-white transition-smooth">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
                        </a>
                    </div>
                </div>

                <!-- Quick Links -->
                <div>
                    <h3 class="text-lg font-semibold mb-4">Platform</h3>
                    <ul class="space-y-2">
                        <li><a href="interactive_simulation_hub.html" class="text-secondary-300 hover:text-white transition-smooth">Simulation Hub</a></li>
                        <li><a href="digital_twin_factory_floor.html" class="text-secondary-300 hover:text-white transition-smooth">Digital Twin</a></li>
                        <li><a href="predictive_analytics_center.html" class="text-secondary-300 hover:text-white transition-smooth">Analytics Center</a></li>
                        <li><a href="multi_plant_command_center.html" class="text-secondary-300 hover:text-white transition-smooth">Command Center</a></li>
                    </ul>
                </div>

                <!-- Support -->
                <div>
                    <h3 class="text-lg font-semibold mb-4">Support</h3>
                    <ul class="space-y-2">
                        <li><a href="javascript:void(0)" class="text-secondary-300 hover:text-white transition-smooth">Help Center</a></li>
                        <li><a href="javascript:void(0)" class="text-secondary-300 hover:text-white transition-smooth">Documentation</a></li>
                        <li><a href="javascript:void(0)" class="text-secondary-300 hover:text-white transition-smooth">Community</a></li>
                        <li><a href="javascript:void(0)" class="text-secondary-300 hover:text-white transition-smooth">Contact Us</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="border-t border-secondary-700 mt-8 pt-8 text-center">
                <p class="text-secondary-300"> 2025 SmartPlant Simulator. All Rights Reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Machine Details Panel Functions
        function showMachineDetails(machineId) {
            const panel = document.getElementById('machineDetailsPanel');
            const title = document.getElementById('machineTitle');
            const id = document.getElementById('machineId');
            const type = document.getElementById('machineType');
            const statusBadge = document.getElementById('machineStatusBadge');
            const efficiency = document.getElementById('machineEfficiency');
            const temp = document.getElementById('machineTemp');
            const vibration = document.getElementById('machineVibration');
            const lastMaint = document.getElementById('lastMaintenance');

            // Mock data for different machines
            const machineData = {
                'M-01': {
                    type: 'Stamping Machine',
                    status: 'Operational',
                    statusClass: 'bg-success-100 text-success-700',
                    efficiency: '98.5%',
                    temp: '72C',
                    vibration: 'Normal',
                    lastMaintenance: '2 days ago',
                    maintenanceDue: '+48h',
                    partsReplacement: '+2 weeks',
                    inventory: [
                        { name: 'Stamping Dies', status: 'In Stock', quantity: 12 },
                        { name: 'Hydraulic Fluid', status: 'Low', quantity: 2 },
                        { name: 'Press Plates', status: 'In Stock', quantity: 8 }
                    ]
                },
                'M-02': {
                    type: 'Welding Machine',
                    status: 'Operational',
                    statusClass: 'bg-success-100 text-success-700',
                    efficiency: '96.2%',
                    temp: '85C',
                    vibration: 'Normal',
                    lastMaintenance: '5 days ago',
                    maintenanceDue: '+24h',
                    partsReplacement: '+3 weeks',
                    inventory: [
                        { name: 'Welding Tips', status: 'Low', quantity: 3 },
                        { name: 'Cooling Fluid', status: 'In Stock', quantity: 8 },
                        { name: 'Electrode Holders', status: 'In Stock', quantity: 5 }
                    ]
                },
                'M-03': {
                    type: 'Assembly Machine',
                    status: 'Warning',
                    statusClass: 'bg-warning-100 text-warning-700',
                    efficiency: '89.1%',
                    temp: '78C',
                    vibration: 'Elevated',
                    lastMaintenance: '12 days ago',
                    maintenanceDue: 'Urgent',
                    partsReplacement: '+1 week',
                    inventory: [
                        { name: 'Assembly Arms', status: 'In Stock', quantity: 4 },
                        { name: 'Servo Motors', status: 'Out of Stock', quantity: 0 },
                        { name: 'Control Units', status: 'In Stock', quantity: 3 }
                    ]
                },
                'M-04': {
                    type: 'Inspection System',
                    status: 'Operational',
                    statusClass: 'bg-success-100 text-success-700',
                    efficiency: '99.2%',
                    temp: '65C',
                    vibration: 'Low',
                    lastMaintenance: '1 day ago',
                    maintenanceDue: '+72h',
                    partsReplacement: '+1 month',
                    inventory: [
                        { name: 'Camera Lenses', status: 'In Stock', quantity: 6 },
                        { name: 'Sensor Arrays', status: 'In Stock', quantity: 4 },
                        { name: 'Calibration Tools', status: 'In Stock', quantity: 2 }
                    ]
                },
                'M-05': {
                    type: 'Packaging Machine',
                    status: 'Operational',
                    statusClass: 'bg-success-100 text-success-700',
                    efficiency: '97.8%',
                    temp: '68C',
                    vibration: 'Normal',
                    lastMaintenance: '3 days ago',
                    maintenanceDue: '+36h',
                    partsReplacement: '+3 weeks',
                    inventory: [
                        { name: 'Sealing Elements', status: 'Low', quantity: 5 },
                        { name: 'Conveyor Belts', status: 'In Stock', quantity: 3 },
                        { name: 'Packaging Film', status: 'In Stock', quantity: 24 }
                    ]
                },
                'M-06': {
                    type: 'Cutting Machine',
                    status: 'Operational',
                    statusClass: 'bg-success-100 text-success-700',
                    efficiency: '94.7%',
                    temp: '76C',
                    vibration: 'Normal',
                    lastMaintenance: '4 days ago',
                    maintenanceDue: '+60h',
                    partsReplacement: '+2 weeks',
                    inventory: [
                        { name: 'Cutting Blades', status: 'Low', quantity: 4 },
                        { name: 'Lubricant', status: 'In Stock', quantity: 7 },
                        { name: 'Guide Rails', status: 'In Stock', quantity: 6 }
                    ]
                },
                'M-07': {
                    type: 'Drilling Machine',
                    status: 'Critical',
                    statusClass: 'bg-error-100 text-error-700',
                    efficiency: 'OFFLINE',
                    temp: '95C',
                    vibration: 'High',
                    lastMaintenance: '18 days ago',
                    maintenanceDue: 'IMMEDIATE',
                    partsReplacement: 'REQUIRED NOW',
                    inventory: [
                        { name: 'Drill Bits', status: 'Low', quantity: 2 },
                        { name: 'Motor Assembly', status: 'Out of Stock', quantity: 0 },
                        { name: 'Cooling System', status: 'In Stock', quantity: 1 }
                    ]
                },
                'M-08': {
                    type: 'Polishing Machine',
                    status: 'Warning',
                    statusClass: 'bg-warning-100 text-warning-700',
                    efficiency: 'MAINT',
                    temp: '70C',
                    vibration: 'Elevated',
                    lastMaintenance: '10 days ago',
                    maintenanceDue: 'In Progress',
                    partsReplacement: '+3 days',
                    inventory: [
                        { name: 'Polishing Pads', status: 'Low', quantity: 3 },
                        { name: 'Polishing Compound', status: 'In Stock', quantity: 12 },
                        { name: 'Buffer Wheels', status: 'In Stock', quantity: 5 }
                    ]
                }
            };

            const data = machineData[machineId] || machineData['M-01'];
            
            title.textContent = `${machineId} Details`;
            id.textContent = machineId;
            type.textContent = data.type;
            statusBadge.textContent = data.status;
            statusBadge.className = `px-3 py-1 rounded-full text-xs font-medium ${data.statusClass}`;
            efficiency.textContent = data.efficiency;
            temp.textContent = data.temp;
            vibration.textContent = data.vibration;
            lastMaint.textContent = data.lastMaintenance;
            
            // Update predictive timeline
            const timelineSection = document.querySelector('#machineDetailsPanel .card:nth-child(2)');
            if (timelineSection) {
                const timelineItems = timelineSection.querySelectorAll('.flex.items-center.space-x-3');
                if (timelineItems.length >= 2) {
                    // Update maintenance due
                    const maintenanceItem = timelineItems[1];
                    const maintenanceTimeText = maintenanceItem.querySelector('.text-xs.text-text-secondary:last-child');
                    if (maintenanceTimeText) {
                        maintenanceTimeText.textContent = data.maintenanceDue || '+48h';
                    }
                }
                if (timelineItems.length >= 3) {
                    // Update parts replacement
                    const partsItem = timelineItems[2];
                    const partsTimeText = partsItem.querySelector('.text-xs.text-text-secondary:last-child');
                    if (partsTimeText) {
                        partsTimeText.textContent = data.partsReplacement || '+2 weeks';
                    }
                }
            }
            
            // Update parts inventory if available
            const inventorySection = document.querySelector('#machineDetailsPanel .card:nth-child(3)');
            if (inventorySection && data.inventory) {
                const inventoryList = inventorySection.querySelector('.space-y-2');
                if (inventoryList) {
                    // Clear existing inventory items
                    inventoryList.innerHTML = '';
                    
                    // Add new inventory items based on the specific machine data
                    data.inventory.forEach(item => {
                        const itemElement = document.createElement('div');
                        itemElement.className = 'flex justify-between items-center p-2 rounded';
                        
                        // Set background color based on status
                        if (item.status === 'In Stock') {
                            itemElement.classList.add('bg-success-50');
                        } else if (item.status === 'Low') {
                            itemElement.classList.add('bg-warning-50');
                        } else {
                            itemElement.classList.add('bg-error-50');
                        }
                        
                        const nameSpan = document.createElement('div');
                        nameSpan.innerHTML = `<div class="font-medium text-text-primary">${item.name}</div>
                                             <div class="text-xs text-text-secondary">${item.status}</div>`;
                        
                        const quantitySpan = document.createElement('span');
                        quantitySpan.className = 'text-lg font-medium text-text-primary';
                        quantitySpan.textContent = item.quantity;
                        
                        itemElement.appendChild(nameSpan);
                        itemElement.appendChild(quantitySpan);
                        
                        inventoryList.appendChild(itemElement);
                    });
                }
            }

            // Show panel
            panel.classList.remove('translate-x-full');
        }

        function hideMachineDetails() {
            const panel = document.getElementById('machineDetailsPanel');
            panel.classList.add('translate-x-full');
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            // Add click handlers to machines
            const machines = document.querySelectorAll('[id^="machine-"]');
            machines.forEach(machine => {
                machine.addEventListener('click', function() {
                    // Extract machine ID and convert to uppercase (e.g., "machine-m01" -> "M01")
                    const machineId = this.id.replace('machine-', '').toUpperCase();
                    // Format machine ID with hyphen (e.g., "M01" -> "M-01")
                    const formattedId = machineId.replace(/^(M|P|K)(\d+)$/i, "$1-$2");
                    showMachineDetails(formattedId);
                });
                
                // Make sure the cursor shows it's clickable
                machine.style.cursor = 'pointer';
            });
            
            // Also add click handlers to SVG machine elements that might not have been selected
            const svgMachines = document.querySelectorAll('g[id^="machine-"]');
            svgMachines.forEach(machine => {
                if (!machine.hasAttribute('onclick')) {
                    machine.addEventListener('click', function() {
                        // Extract machine ID and convert to uppercase (e.g., "machine-m01" -> "M01")
                        const machineId = this.id.replace('machine-', '').toUpperCase();
                        // Format machine ID with hyphen (e.g., "M01" -> "M-01")
                        const formattedId = machineId.replace(/^(M|P|K)(\d+)$/i, "$1-$2");
                        showMachineDetails(formattedId);
                    });
                }
                // Make sure the cursor shows it's clickable
                machine.style.cursor = 'pointer';
            });
            
            // Initialize with Assembly floor visible
            switchFloor('assembly');
        });
        
        // Function to switch between floors
        function switchFloor(floorId) {
            // Hide all floors first
            const floors = document.querySelectorAll('.floor-section');
            floors.forEach(floor => {
                floor.style.display = 'none';
            });
            
            // Show the selected floor
            const selectedFloor = document.getElementById(floorId + '-floor');
            if (selectedFloor) {
                selectedFloor.style.display = 'block';
            }
            
            // Update breadcrumb navigation
            const floorText = document.querySelector('.text-text-secondary:nth-of-type(2)');
            const lineText = document.querySelector('.text-primary-600.font-medium');
            
            if (floorId === 'assembly') {
                floorText.textContent = 'Production Floor';
                lineText.textContent = 'Assembly Line 1';
                lineText.style.color = ''; // Reset to default
            } else if (floorId === 'production') {
                floorText.textContent = 'Production Floor';
                lineText.textContent = 'Production Line 1';
                lineText.style.color = '#2563EB'; // Set to blue directly
            } else if (floorId === 'packaging') {
                floorText.textContent = 'Packaging Floor';
                lineText.textContent = 'Packaging Line';
                lineText.style.color = ''; // Reset to default
            }
            
            // Update button styles - highlight the selected floor tab
            const floorButtons = document.querySelectorAll('.floor-tab');
            floorButtons.forEach(button => {
                // Remove active class from all buttons
                button.classList.remove('active-floor');
                button.classList.remove('border-primary-500');
                button.classList.remove('text-primary-600');
                button.classList.add('border-transparent');
                button.classList.add('text-gray-500');
            });
            
            // Add active class to selected button
            const selectedButton = document.querySelector(`.floor-tab[onclick="switchFloor('${floorId}')"]`);
            if (selectedButton) {
                selectedButton.classList.add('active-floor');
                selectedButton.classList.add('border-primary-500');
                selectedButton.classList.add('text-primary-600');
                selectedButton.classList.remove('border-transparent');
                selectedButton.classList.remove('text-gray-500');
            }
            floorButtons.forEach(button => {
                button.classList.remove('bg-primary-600', 'text-white');
                button.classList.add('bg-gray-100', 'text-gray-700');
            });
            
            const activeButton = document.getElementById(floorId + 'FloorBtn');
            if (activeButton) {
                activeButton.classList.remove('bg-gray-100', 'text-gray-700');
                activeButton.classList.add('bg-primary-600', 'text-white');
            }
        }
    </script>
<script id="dhws-dataInjector" src="../public/dhws-data-injector.js"></script>
</body>
</html>